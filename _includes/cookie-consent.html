<!-- Cookie Consent Banner -->
<div id="cookie-consent-banner" class="cookie-consent-banner" style="display: none;">
    <div class="cookie-consent-content">
        <div class="cookie-consent-text">
            <p><strong>ğŸª Cookie ä½¿ç”¨é€šçŸ¥</strong></p>
            <p>æœ¬ç«™ä½¿ç”¨ Cookie æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒã€åˆ†æç½‘ç«™æµé‡å¹¶å±•ç¤ºä¸ªæ€§åŒ–å¹¿å‘Šã€‚ç»§ç»­ä½¿ç”¨æœ¬ç«™å³è¡¨ç¤ºæ‚¨åŒæ„æˆ‘ä»¬ä½¿ç”¨ Cookieã€‚</p>
            <p>
                <a href="{{ '/privacy-policy/' | relative_url }}" target="_blank">äº†è§£æ›´å¤š</a>
            </p>
        </div>
        <div class="cookie-consent-buttons">
            <button id="cookie-accept" class="cookie-btn cookie-accept">æ¥å—</button>
            <button id="cookie-decline" class="cookie-btn cookie-decline">æ‹’ç»</button>
        </div>
    </div>
</div>

<style>
    .cookie-consent-banner {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        z-index: 9999;
        animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
        from {
            transform: translateY(100%);
        }

        to {
            transform: translateY(0);
        }
    }

    .cookie-consent-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        flex-wrap: wrap;
    }

    .cookie-consent-text {
        flex: 1;
        min-width: 300px;
    }

    .cookie-consent-text p {
        margin: 5px 0;
        font-size: 14px;
        line-height: 1.5;
    }

    .cookie-consent-text strong {
        font-size: 16px;
    }

    .cookie-consent-text a {
        color: #ffd700;
        text-decoration: underline;
    }

    .cookie-consent-text a:hover {
        color: #ffed4e;
    }

    .cookie-consent-buttons {
        display: flex;
        gap: 10px;
        flex-shrink: 0;
    }

    .cookie-btn {
        padding: 10px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .cookie-accept {
        background: white;
        color: #667eea;
    }

    .cookie-accept:hover {
        background: #f0f0f0;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .cookie-decline {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid white;
    }

    .cookie-decline:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }

    /* ç§»åŠ¨ç«¯é€‚é… */
    @media (max-width: 768px) {
        .cookie-consent-content {
            flex-direction: column;
            text-align: center;
        }

        .cookie-consent-buttons {
            width: 100%;
            justify-content: center;
        }

        .cookie-btn {
            flex: 1;
        }
    }
</style>

<script>
    (function () {
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»åšå‡ºé€‰æ‹©
        const cookieConsent = localStorage.getItem('cookieConsent');

        if (!cookieConsent) {
            // å¦‚æœæ²¡æœ‰è®°å½•ï¼Œæ˜¾ç¤ºæ¨ªå¹…
            document.getElementById('cookie-consent-banner').style.display = 'block';
        }

        // æ¥å—æŒ‰é’®
        document.getElementById('cookie-accept').addEventListener('click', function () {
            localStorage.setItem('cookieConsent', 'accepted');
            localStorage.setItem('cookieConsentDate', new Date().toISOString());
            hideBanner();
            // å¯ä»¥åœ¨è¿™é‡Œå¯ç”¨ Google Analytics ç­‰æœåŠ¡
            enableCookies();
        });

        // æ‹’ç»æŒ‰é’®
        document.getElementById('cookie-decline').addEventListener('click', function () {
            localStorage.setItem('cookieConsent', 'declined');
            localStorage.setItem('cookieConsentDate', new Date().toISOString());
            hideBanner();
            // å¯ä»¥åœ¨è¿™é‡Œç¦ç”¨æŸäº› Cookie
            disableCookies();
        });

        function hideBanner() {
            const banner = document.getElementById('cookie-consent-banner');
            banner.style.animation = 'slideDown 0.5s ease-out';
            setTimeout(function () {
                banner.style.display = 'none';
            }, 500);
        }

        function enableCookies() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ å¯ç”¨ Google Analytics ç­‰æœåŠ¡çš„ä»£ç 
            console.log('Cookies enabled');
        }

        function disableCookies() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ ç¦ç”¨æŸäº› Cookie çš„ä»£ç 
            console.log('Cookies declined');
        }

        // æ·»åŠ ä¸‹æ»‘åŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
    @keyframes slideDown {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(100%);
      }
    }
  `;
        document.head.appendChild(style);
    })();
</script>